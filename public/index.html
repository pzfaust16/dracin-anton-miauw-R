<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>StreamOrange - Fix</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #0a0a0a; color: white; font-family: sans-serif; }
        .text-orange { color: #EE4d2d; }
        .movie-card { background: #1a1a1a; border-radius: 12px; overflow: hidden; }
    </style>
</head>
<body>

    <nav class="p-5 border-b border-white/10">
        <h1 class="text-2xl font-bold text-orange">StreamOrange</h1>
    </nav>

    <div id="status" class="text-center p-10 text-gray-500">MENGAMBIL DATA FILM...</div>
    
    <div id="movieGrid" class="grid grid-cols-2 md:grid-cols-5 gap-6 p-6"></div>

    <script>
        async function ambilData() {
            try {
                const response = await fetch('/api/dramabox/latest');
                const data = await response.json();
                
                console.log("Cek Data:", data); // Untuk liat di inspect element

                // PENYEBAB MASALAH: File temanmu membungkus data di dalam 'chapterList'
                // Jadi kita harus panggil data.chapterList
                const listFilm = data.chapterList || data;

                if (!listFilm || listFilm.length === 0) {
                    document.getElementById('status').innerText = "Data Kosong atau IP Limit.";
                    return;
                }

                document.getElementById('status').style.display = 'none';
                const grid = document.getElementById('movieGrid');

                grid.innerHTML = listFilm.map(film => `
                    <div class="movie-card cursor-pointer" onclick="alert('Buka: ' + '${film.bookName}')">
                        <img src="${film.cover}" class="w-full aspect-[2/3] object-cover">
                        <div class="p-3 text-[10px] font-bold uppercase truncate">${film.bookName}</div>
                    </div>
                `).join('');

            } catch (err) {
                document.getElementById('status').innerText = "Gagal koneksi ke server.";
                console.error(err);
            }
        }

        ambilData();
    </script>
</body>
</html>
